# Домашнее задание к уроку "Архитектура и серверная часть" 
## Цель

Научиться работать с линтером и форматтером `ruff`, применяя его к реальному проекту для улучшения качества кода.

## Задание

1. **Описание:**

В этом задании вы будете работать с реальным, но уже неиспользуемым, коммерческим проектом. В нем предварительно были удалены или заменены "чувствительные" данные (например токены, юзернеймы, пароли). Код проекта очень сильно далек от идеала (на самом деле он прямо ужасен и является наглядным примером того, как писать код не надо) и содержит множество проблем, которые могут быть выявлены и частично исправлены с помощью линтера и форматтера Ruff. Ваша задача — изучить код, разобраться с документацией [ruff](https://docs.astral.sh/ruff/), настроить его конфигурацию и применить линтер и форматтер к проекту.

2. **Инструкция:**

    * Склонируйте репозиторий проекта к себе на компьютер.
    * Установите менеджер пакетов `uv` (если у вас его нет): `curl -LsSf https://astral.sh/uv/install.sh | sh` для MacOS и Linux (подробнее о `uv` [здесь](https://docs.astral.sh/uv/))
    * Установите зависимости проекта: `uv sync` 
    * Установите `ruff`: `uv add ruff` (будет хорошо, если вы найдете способ добавить ruff в dev зависимости).
    * Изучите документацию `ruff`, обращая внимание на разделы о конфигурации, правилах, исправлениях и форматировании.
    * Создайте свою конфигурацию `ruff` используя `pyproject.toml`, который уже представлен в проекте.
    * Экспериментируйте с различными настройками `ruff`. Вы можете настроить его как очень строго (чтобы выявить максимальное количество проблем), так и более мягко (сосредоточившись на базовом форматировании и наиболее критичных ошибках).
    * Запустите `ruff` для анализа и форматирования кода:
        * `uv run ruff check` — для анализа кода и выявления проблем.
        * `uv run ruff format` — для форматирования.
    * Создайте свой публичный репозиторий и закоммитьте туда изменения, включая обновленный `pyproject.toml` и исправленный код.

P.S. Обратите внимание, что вам не нужно запускать сам код проекта (flask). Вы работаете только с кодом и его качеством.

3. **Что вам нужно прислать на проверку:**

    * Ссылка на ваш GitHub репозиторий с выполненным заданием.  Репозиторий должен содержать:
    * Исходный код проекта после применения Ruff и ваших ручных изменений.
    * Обновленный `pyproject.toml`, который содержит вашу конфигурацию `ruff`.
    * (Опционально) краткое описание в `README.md`, какие настройки вы использовали и почему, а также какие проблемы вы решили с помощью `ruff`.

## Благодарность

Большое спасибо за выполнение задания! Если у вас возникли вопросы или трудности, не стесняйтесь обращаться к вашему ментору. Вы также можете подписаться на мой телеграм-канал [Записки экспата-программиста](https://t.me/ExpatDevDiary) или написать мне лично в [тг](https://t.me/samoylovartem) - я всегда рад пообщаться про Python и программирование в целом. 

Принял. Вторая попытка, первая не удалась. Приступил к выполнению.

## Краткое описание решенных проблем

Было много трудностей, дважды клонировал проект, с первого раза не смог настроить окружение.<br>
Во втором клонировании вновь решал проблемы с настройкой в PyCharm окружения (автоматически не подставлялся корень проекта и с ручной подстановкой были проблемы).
Долго не настраивался правильный .venv и интерпретатор, вручную настраивал Run Configuration и проводил активацию среды. Перенастраивал запуск PowerShell в PyCharm.<br>
Вот один из кусочков процесса настройки, уже на финише:

PS C:\Users\user\Documents\GitHub\Architecture-and-backend-homework_kdm> ruff check
ruff : Имя "ruff" не распознано как имя командлета, функции, файла сценария или выполняемой программы. Проверьте правильность написания имени, а также наличие и правильность пути, после чего повторите попытку.
строка:1 знак:1
+ ruff check
+ ~~~~
    + CategoryInfo          : ObjectNotFound: (ruff:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException

PS C:\Users\user\Documents\GitHub\Architecture-and-backend-homework_kdm> ruff check --fix
ruff : Имя "ruff" не распознано как имя командлета, функции, файла сценария или выполняемой программы. Проверьте правильность написания имени, а также наличие и правильность пути, после чего повторите попытку.
строка:1 знак:1
+ ruff check --fix
+ ~~~~
    + CategoryInfo          : ObjectNotFound: (ruff:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException

PS C:\Users\user\Documents\GitHub\Architecture-and-backend-homework_kdm> ruff format
ruff : Имя "ruff" не распознано как имя командлета, функции, файла сценария или выполняемой программы. Проверьте правильность написания имени, а также наличие и правильность пути, после чего повторите попытку.
строка:1 знак:1
+ ruff format
+ ~~~~
    + CategoryInfo          : ObjectNotFound: (ruff:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException

PS C:\Users\user\Documents\GitHub\Architecture-and-backend-homework_kdm> uv add --dev ruff
Resolved 44 packages in 0.87ms
Audited 43 packages in 4ms
PS C:\Users\user\Documents\GitHub\Architecture-and-backend-homework_kdm>

В результате все же удалось все настроить.<br>
С помощью линтера Ruff командой:<br>
+ uv run ruff check <br>

Было найдено 38 ошибок<br>
3 ошибки исправлены автоматически<br>
35 ошибок исправлены вручную, на завершающем этапе получен ответ:

Found 11 errors.
No fixes available (11 hidden fixes can be enabled with the `--unsafe-fixes` option).
PS C:\Users\user\Documents\GitHub\Architecture-and-backend-homework_kdm> uv run ruff check
All checks passed!
PS C:\Users\user\Documents\GitHub\Architecture-and-backend-homework_kdm> uv run ruff format
5 files reformatted
PS C:\Users\user\Documents\GitHub\Architecture-and-backend-homework_kdm> uv run ruff format --check
5 files already formatted
PS C:\Users\user\Documents\GitHub\Architecture-and-backend-homework_kdm>

### Итог проделанной работы:
   * Ruff установлен и работает
   * uv add --dev ruff - ruff добавлен в dev-зависимости
   * uv run ruff check - все проверки пройдены
   * uv run ruff format - 5 файлов отформатированы

### Что было сделано:
   * Установлены зависимости проекта: uv sync
   * Добавлен ruff: uv add --dev ruff
   * Исправлены все ошибки статического анализа:<br>
   ___Удалены неиспользуемые импорты и переменные___<br>
   ___Исправлены сравнения с None/True/False___<br>
   ___Приведен код к стандартам PEP 8___
   * Автоматическое форматирование: 5 файлов отформатированы